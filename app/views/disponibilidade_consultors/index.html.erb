<section id="services" class="services section-bg">
  <div class="container custom-container" data-aos="fade-up">
    <div class="section-title">
      <h2>
        Disponibilidade
        <% if current_user.consultor? %>
          <%= link_to new_disponibilidade_consultor_path, class: 'btn btn-primary btn-sm', title: 'Criar Nova Disponibilidade' do %>
            <i class="bi bi-plus"></i>
          <% end %>
        <% end %>
      </h2>
    </div>

    <div class="row">
      <% @disponibilidade_consultors.each do |data, disponibilidades| %>
        <div class="col-md-6 d-flex align-items-stretch mb-3" data-aos="zoom-in" data-aos-delay="100">
          <div class="icon-box-agendamento">
            <h4><%= data.strftime("%d/%m/%Y") %></h4>
            
              <% disponibilidades.each do |disponibilidade| %>
               <div class="d-flex justify-content-between align-items-center mb-2">
                  <p class="mb-0">
                    <strong>In√≠cio:</strong> <%= disponibilidade.hora_inicio.strftime("%H:%M") %> |
                    <strong>Fim:</strong> <%= disponibilidade.hora_fim.strftime("%H:%M") %>
                  </p>
                  <% if current_user.consultor? %>
                    <%= button_to '<i class="bi bi-pencil"></i>'.html_safe, edit_disponibilidade_consultor_path(disponibilidade), method: :get, class: 'btn btn-primary btn-sm', title: 'Editar', form: { class: 'd-inline' } %>
                    
                    <%= button_to '<i class="bi bi-trash"></i>'.html_safe, disponibilidade_consultor_path(disponibilidade), method: :delete, class: 'btn btn-danger btn-sm', title: 'Excluir', data: { confirm: 'Tem certeza que deseja excluir esta disponibilidade?' }, form: { class: 'd-inline' } %>
                  <% end %>
                </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</section>
